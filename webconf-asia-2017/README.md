# Web Typography: where East meets West

*For Webconf.Asia 2017. This is sort of a transcript of the talk.*

### Introduction

大家好！The last time I was in Hong Kong was 1998, so it's been a while. I'm really excited to be here to talk to all of you about two of my favourite things, both of which are in my talk title. But before we get to that, let me introduce myself...with emojis.

My name is Hui Jing, and I'm Malaysian. I played basketball for more than half my life, and it was actually what got me into web development in the first place. I'm a front-end engineer based in Singapore now, and I love CSS so much that I will write blog posts about it. I also run Talk.CSS, which is Singapore's only CSS-centric meetup at the moment.

### Internet and the web

So in case I wasn't clear earlier, the two favourite things I was talking about were the web and typography. Let's first talk a bit about the Web. The web and the internet are actually not the same thing. The internet is the entire network of networks that connect all the world's devices to each other. And it was conceived of by a group of very smart, talented individuals working out of the Advanced Research Projects Agency (ARPA) in 1958. These internet pioneers were the ones who came up with the concepts and protocols that form the backbone of this indispensable communication tool that literally changed the world.

Now, the web is much more recent, formally invented by Sir Tim Berners-Lee on March 12, 1989 as a means for researchers to share information. And this is what he wrote in an open letter during the web's 28th birthday back in March.

> “I imagined the web as an open platform that would allow everyone everywhere to share information, access opportunities and collaborate across geographic and cultural boundaries.”

The purpose of the web is to connect the world's population, to allow people who live half a planet away to become friends. To share your experiences with friends 20km or 20,000km away from you. Both the internet and the web were built to be open. Or at least, it was meant to be. No centralised control, you didn't have to ask anyone's permission to publish a website. You could just go ahead and do it. If your friend from Argentina has a website, you can just type in that URL to see it. You don't need a visa or a passport. There are no national boundaries online. To me, that is amazing.

Bruce Lawson is here today. And I'm very thankful for the chance to meet him. I want to highlight a point he made in his article earlier this year, that according to the GSMA Intelligence report on consumer barriers to mobile internet adoption in Asia:

> A lack of awareness and locally relevant content was the most commonly cited barrier to internet adoption: 72% of non-internet users across the six survey markets felt this was a barrier.

The report also goes on to say that:

> At present, the world’s linguistic and cultural diversity is not reflected in the content and services available online. A great deal of the content available to Asian users is simply translated into local languages and does not reflect the significant cultural diversity found across the region.

I'm quite sure Bruce will cover this in a lot more detail in his talk later. But a point I would like to emphasise is, roughly 17% of the world's population are native Chinese speakers, and yet only 2% of websites are in Chinese. In contrast, an estimated 51% of the world's websites are in English, when native English speakers make up only around 5% of the world's population. The fact that digital computing originated from places that were predominantly English-speaking plays a big role in this.

I do think that internationalisation efforts have been substantial over the years, and will continue to be for years to come. All the work coming out of the Unicode Consortium has been significant in this regard, with the goal to be able to represent every character in any system, regardless of platform, program or language.

East Asian languages still present a huge challenge due to the volume of glyphs we have. Han unification is also a very controversial issue, and I don't claim to understand the full ins and outs of it. And though there is still a long way to go, it is recommended by the W3C that you choose the UTF-8 character encoding for your content or data.

### Overview of Western and Eastern writing systems

But before we dive into the digital, let's go analogue with typography and a little bit of history. I've come across numerous definitions of typography over the years, and have personally settled on this one by Gerrit Noordzij, that “Typography is writing with prefabricated letters”. Letters are the building blocks of a writing system, regardless of language. And if you think about it, almost every writing system in the world today seems to be alphabetic.

But Chinese is different. Chinese is currently the only logographic writing system left that is widely used by millions of people. Each Chinese character is composed within a uniform square, allowing Chinese to be read efficiently, regardless of whether it is set horizontally or vertically. And until proven otherwise, it seems that the Chinese language was an indigenous invention, developed separately from the Proto-Sinaitic scripts which were the origins of alphabetic languages.

Let's broadly look at how the nature of Western languages in Europe differ from the Eastern languages in Asia. The Phoenician alphabet is considered the origin of many alphabetic writing systems on which the Greek, Latin and Roman alphabets were based on. In such languages, letters represent sounds of the spoken language, and are combined to form words that convey meaning. In contrast, a logograph is a written character that itself represents a word.

With alphabets, you have a small set of letters used in a myriad of combinations to form all the words you would use to communicate with another person. With Chinese characters, we have thousands upon thousands of unique glyphs that can express meaning on their own or be used in combination with other glyphs. This has a direct consequence on the structure of the language itself. For example:
- Hippopotamus, English word of 12 characters. 华语叫河马.
- Lebensgefährte (Lee-bin-skir-fear-te), German word of 14 characters. 华语叫伴侣.
- Grianghrafadóireachta (Green-hra-fer-doi-rek-te), Irish word of 21 characters. 这能翻译成摄影.

### History of writing and typography (West)

This is a table that illustrates how the modern alphabet came to be. Vincent Steer, founder of the British Typographers' Guild, said that the character of any alphabet is dictated by the materials used in its expression. Cuneiform writing was made by using a wedge-shaped tool that was pressed into wet clay, the Egyptians wrote on papyrus with a reed pen, making their lines were soft and flowy. 

Evidence of writing by the Ancient Greeks were largely preserved in stone inscriptions, and although the earliest ones were almost purely sans serif, later stone cutters tended to spread out the ends of letters into serifs. The most famous Roman inscription is probably the Trajan Column, whose capitals are still the object of study for design students today. Earliest letters consisted only of capitals and if you notice the inscription, the letters had no spaces between them.

But inscriptions also served as guides for manuscript writers, who used yet another tool for writing, in this case, the pen. A pen produces letters which are smoother and flow better as compared to engravings. The very first Roman Square Capitals, modelled on stone inscriptions, were not easy to write. Scribes, armed with pens, evolved the alphabets themselves into forms that were smoother and flowed better while writing. Lower-case letters were an inevitable result of the blossoming of transcription culture which greatly increased the volume of writing, and hence styles of writing as well.

Carolingian miniscules were used all over Europe by the 11th century. But again, overwhelming demand for written matter, led to the development of Gothic scripts, which were narrower and could allow words to be compacted. A space-saving measure, actually. And most countries in Europe had their own flavour of Gothic scripts.

When moveable type took over as the preferred method of duplication, type designers once again modelled their types on manuscript writing, and by now, there was quite a large range of styles they could choose from.

It's rather cyclical, don't you think? That handwriting, influenced by the tools of the time, was what masons inscribed into stone, which were then copied by scribes and copyists, that in turn served as inspiration for printers punch cutting types. Did I mention I love typography?

So all that was just an excuse to tell a story. What I really wanted to show was how we classify Latin-based typefaces. And it seems like there are all manner of categories. We have our Old styles, Transitionals, Moderns and Slabs. Then our Grotesques, Humanists and Geometrics. But broadly speaking, Latin-based typefaces can be grouped into Serifs and Sans-serifs. Serifs being those things highlighted in the orange circles. Two big families, if you may.

### History of writing and typography (East)

Even for Chinese scripts, we were influenced by the materials of the time. It's just that Chinese writing went through the entire process of development and evolution way earlier than Europe. Symbols and glyphs, known as 陶文， have been found from archaeological sites dating back to the Neolithic age, and these symbols may have been the origins of Chinese writing. 

One of the most fascinating things about China is the fact that it has the richest and most detailed historical record. Chinese records are the stuff of legends, with annals dating back till 722BC of the Spring and Autumn period. By the close of the 15th century, China probably produced more books in terms of title and volume than all other nations put together.

书画同源. Calligraphy and painting were one of the most highly regarded arts in Imperial China and this phrase describes how closely intertwined these two disciplines are. 文房四宝 is an expression used to refer to the four implements necessary for writing and painting. The brush, paper, inkstick and inkstone, which was used to grind the solid inksticks.

Brush writing had been a traditional method developed long before our knowledge of ancient writing and the Chinese used a very wide range of materials for record keeping. Bones, shells, bronze, stone, jade and wood. But you can't really call those books. The origins of Chinese books were written on bamboo and silk. The invention of paper is credited to 蔡伦 in 105AD. Even though inks had been used for writing much earlier, the technique for inkmaking was perfected around the Eastern Han dynasty and 韦诞, who lived between 179-253, is known as one of the earliest inkmakers. 

Oracle Bone script or 甲骨文, is considered the earliest writing system we had, and with more than 5000 characters, it was a pretty sophisticated writing system. Considering the Shang dynasty existed from around 1600BC till 1046BC, I find this highly impressive. 甲骨文 characters were all straight lines and angles, because characters were cut with a sharp stylus or knife onto very hard materials of bone or turtle shells.

But the key implement of Chinese writing is the brush. Pieces of ox bone bearing inscriptions made by hair brush and ink have been dated around the time of the Shang dynasty. 金文 or Bronze script were found on bronze artefacts dated back to the Shang dynasty. Early bronze inscriptions were cast from clay moulds, while later inscriptions were carved. In general, scripts developed and used before Qin Shihuang unified China fall into a very large category known as 大篆, or Big Seal script.

大篆 encompasses all the pre-Qin scripts like 甲骨文，金文，籀文，石鼓文，六国文。Part of the unification of China was the standardisation of Chinese writing during the Qin dynasty, which gave rise to 小篆 or Small Seal script。Characters were simplified, and had more distinct radicals and less strokes. Many of the variant glyphs were discarded. With its elegant strokes and curves, 小篆 is arguably the most artistic for all the scripts and was used throughout the Han dynasty until eventually falling out of favour during the Three Kingdoms.

Clerical script or 隶书，evolved from 小篆 during the end of the Qin dynasty and reached peak usage around the Eastern Han dynasty. Strokes were further simplified and the characters developed a more square look, as calligraphic techniques matured. 楷书 or Model script in turn evolved from 隶书, during the late Han and flourished during the Tang dynasty. It has been said that Chinese characters were finalised with the formation of 楷书。I mean, it is still widely used today. Within calligraphy circles, there is a saying that highlights how every dynasty had an exceptional script of its time. 秦篆汉隶唐楷。

宋体 can be considered the first printing-specific Chinese script. Earliest woodblock prints were based off the writings of well-known calligraphers. But again, the medium and tools used resulted in the evolution of the way the scripts were produced. By the Ming dynasty, 宋体 had matured into the form we are familiar with today. The contemporary typefaces used for print publications can be broadly classified into these families: 宋体 (also known as 明体),  楷体, 仿宋体, 黑体. Both 黑体 and 仿宋体 are twentieth century creations.

It is not uncommon to see comparisons of 宋体 to serifs and 黑体 to sans-serifs, but I think it makes more sense for Chinese typefaces to maintain their own classifications. They are completely different from Latin alphabets anyway. 

### History of printing

Of course, this also had an impact on the methods of duplication for text. The most basic copying technology is simply transcription, which was the de facto method of duplication in Europe before printing. Medieval transcription culture blossomed during the Middle Ages as demand for texts increased. This is evidenced by the large collection of medieval manuscripts that are still preserved in various national museums, libraries and universities all across Europe.

Transcription was also popular in the East, but as demand for books grew, the invention of printing technology was inevitable. The earliest mechanical printing method for duplication of texts was woodblock printing, invented in China during the Tang dynasty, one of the most prosperous eras in Chinese history between 618-907AD. 玄奘, who went to India on a pilgrimage to retrieve the Buddhist sutras, returned to China in 645AD, and proceeded to translate them, as well as print and distribute images of Samantabhadra (普贤菩萨) on huifeng paper (回锋纸).

The first complete printed book is probably the Diamond Sutra, dated 868AD. From the level of detail of those facial expressions and robes, we can see how advanced woodblock printing techniques had developed in China by that time. In fact, during the Song dynasty (960-1279) the block-carving craft reached such heights that engravers were able to imitate individual calligraphic styles in 楷书. The method of woodblock printing persisted all the way till the Qing dynasty and beyond. Woodblock printing was an integral part of Eastern printing culture, coexisting with and complementing moveable-type printing during the later years.

Woodblock printing was introduced to Europe through Russia, likely by the Mongols, who crusaded along the Silk Road to the West. Evidence of woodblock printing could be found in Europe by 1400, but at the time they were mostly crude cuts, serving as illustrations for new printed books. Although block-printed books were produced in Europe, for example, the *Speculum Humanae Salvationis* and the *Ars moriendi*. They were largely used for thin volumes, and mostly religious texts like the *Biblia pauperum*. Woodblock printing was never a major method for text duplication in Europe. By the time woodblock printing reached Europe, transcription infrastructure was very strongly established, and woodblock printing could not replace it.

Moveable type was too pioneered in China. Invented by an ordinary citizen, 毕昇, during the 庆历 reign from 1041-1048. 毕昇's invention was recorded in 梦溪笔谈 by 沈括, using ceramics to manufacture his types. The Chinese used a variety of other materials for making types, like clay, wood, bronze, tin and even lead. Moveable-type printing had a number of advantages, mainly its speed and flexibility in typesetting, making it possible to print all types of books. Moveable types could also be shared between printers. Travelling craftsmen could just carry a load of wood types and set up wherever they could.

Korea adopted 毕昇's idea of moveable-type printing during the Kingdom of Goryeo (koh-ryah) and brought it to new heights during the Kingdom of Joseon (cho-san). The government set up Chuja-so or the Bureau of Type Casting, which casted hundreds and thousands of metal types, as well as official printing offices in every province. The hallmark of Korean printing was the mass production of metal types, mostly bronze, by casting. This technique of casting was pioneered by the Koreans, with cast metal types being in use before 1239. And with the volume of types cast, they'd honed their techniques to levels far beyond that of other countries. Records have shown that Choe Yun-ui (chue-yon-ne), a Korean civil minister, printed Sangjeong Gogeum Yemun in 1234. And the earliest moveable-type printed book still in existence today, is Jikji, a Korean Buddhist text, dated 1377, three-quarters of a century before Gutenberg.

However, moveable-type printing never really took off in China, and there are various reasons for this. 
1. Moveable type was widely used across Korea, but barely used at all in China. 
2. The Chinese printers also used a different method from the Koreans to manufacture types, choosing to engrave the types as opposed to casting them. Typesetting was challenging, and there were inking problems with these types. 
3. The choice to engrave types as opposed to casting them pushed up the manufacturing cost of types immensely as well. 
4. Furthermore, economies of scale only kicked in for large production runs, but printers were often wary of overstocking and often only printed a hundred copies per run. The resetting of type was troublesome and uneconomical when compared to woodblocks for such quantities. 
5. Given the lack of emphasis and development of moveable-type printing, the quality of prints left much to be desired as texts were littered with mistakes. 
6. Besides, with the long tradition of woodblock printing, the Chinese were exceptional at it. If any technical improvements were necessary for mass produced prints, they would probably have chosen to refine woodblock printing rather than replace it.

Over in Europe, by the mid-15th century, Gutenberg had printed his first book, Ars grammatica by Aelius Donatus, using moveable type. Even though he did not invent the idea of moveable type, he can be credited for making it work in Europe. Moveable type became the de facto technique for printing in the West, and moveable type technology surged forward through the centuries since. Moveable type printing suited alphabetic languages very well, given there was only a small fixed set of types required to print entire books. But at the end of the day, type is simply a tool for communication, a means to record and duplicate ideas onto a physical medium.

### The web as a medium

Of course, this is a web conference, so we'll now fast forward to the digital age, specifically the internet age. The ability to communicate abstract ideas through language and writing has always been the “killer feature” of human beings, it has been so for thousands of years, though the medium has changed over time. 

From cave paintings to stone engravings, from parchment to paper, the medium of our time is now the screen and the browser. Our types are now font files. And we've replaced typesetting with composing sticks or font plates and discs, with CSS. That's about as close an analogy I could come with with regards to analogue typesetting. 

So let's discuss typography on the web.

We first need to understand the web as a medium, and to be fair, it is a rather young medium. In his doctoral thesis, inventor of CSS, Håkon Wium Lie (Hor-ken Wee-um Lee), described a number of key differences between the distribution of content on paper versus electronic distribution over the web. 
1. The late binding between content and presentation of electronic publishing becomes later binding on the web. This relative freedom of presentation presents a performance challenge as binding now takes place while the user is waiting, and the author is not present to verify if the presentation is correct or not. 
2. There is no longer a single final form of presentation either, multiple output devices could be used. 
3. Authors can influence the presentation, but he or she no longer holds complete control, instead, a combination of influences from various sources, like the browser and the users themselves, form the final presentation. 
4. Dependable delivery is also uncertain, as web resources are distributed across multiple connected servers and the possibility of any of them being unavailable is pretty significant.

Although many would like to think the web is simply print expressed on an electronic screen, it is not. It is unique medium on its own.

### Font formats

Here's a list of common font formats used on the web. Why on earth are there so many formats? Well, here's my non-technical explanation. Fonts are simply containers for glyphs, and font formats describe these glyphs. The earliest fonts were pixel-based bitmaps, which were fine for low-resolution screens, but for printing on high-resolution printers, we needed a better solution. Either compress the bitmapped glyphs, or find an alternative rendering method. 

Donald Knuth created Metafont in 1978 for the TeX system, which generated compressed bitmap fonts. John Warnock, founder of Adobe, came up with Postscript in 1985, the first vector font, and boy did it take off. 

TrueType was Apple and Microsoft's answer to Adobe's font monopoly. Both companies then worked separately to improve TrueType, especially with regards to fonts for East Asian writing systems. And Apple came up with TrueType GX, later renamed Apple Advanced Typography, while Microsoft turned to Adobe and together they came up with OpenType.

EOT, or embedded OpenType is Microsoft's proprietary standard which is a compact form of OpenType fonts meant for use on web pages. Although they tried to submit this as a W3C recommendation, it was rejected in favour of WOFF, or the Web Open Font Format. WOFF was quite the industry effort, involving Microsoft, Mozilla and Opera.

Those of us who have worked on projects with self-hosted fonts will probably used something called the @font-face rule, where we declare a list of different font formats, in the hopes our fonts will show up correctly in as many browsers as possible. The number of font formats we need to declare has decreased over the years and right now, you can pretty much get away with declaring just WOFF and WOFF2.

### How browsers pick fonts

The earliest implementation of CSS had a relatively small section on fonts, which covered font properties that could be set via CSS, as well as the font matching algorithm so browsers could determine what fonts to use.

The algorithm itself has since been expanded over the last 2 decades but the general guideline to what font is used for a given character in a run of text is as follows:
- the User Agent (UA) takes the first family name defined in the `font-family` property
- if it's a generic family keyword, the UA will look up the font family to be used, otherwise it will try to find the family from fonts declared through `@font-face`, if not, then system fonts
- once matched, the UA will assemble the set of font faces in the family, then pick the appropriate font face based on declared font properties:
    + `font-stretch`,
    + `font-style`,
    + `font-weight`,
    + `font-size`
- But if no matching face exists, or if the matched face is missing the glyph that needs to be rendered, the next family name is considered, and the UA runs through the steps again
- Once a font face is matched, the font will be loaded
- If all the font family names have been run through, and still no font face matches, a system font fallback will be called into play

If a character cannot be displayed using any font at all, perhaps the famous, or infamous biang character, you'll end up with a symbol of the missing glyph, or what we endearingly call 豆腐, which personally, I see much less of these days, compared to 10 years ago, thanks to the widespread use of Unicode.

Regardless, from an aesthetic perspective, it is recommended you declare your Latin-based font of choice first, because order does matter. It is almost a given that a CJK font, or an Arabic or Hebrew font, for that matter, will have support for Latin characters but not the other way around. Declaring those fonts first will result in the Latin characters displayed using glyphs from the Chinese font instead. And sometimes, this doesn't look too great on Windows.

Even though the CSS fonts module level 3 states that user agents must match font names case insensitively according to the “Default Caseless Matching” algorithm as defined in the Unicode specification, it is still recommended to put them in quotes, just in case.

Generic font families were introduced in CSS2.1, and left it up to user agents to provide reasonable default choices, which express the characteristics of each family as well as possible within the limits allowed by the underlying technology. 

There are currently five generic font families, with four more being defined in the CSS Fonts Module Level 4. The thing about these generic font families is they are notoriously inconsistent, but they were never meant to be consistent in the first place. You'd leave these generic font families to be fallbacks, triggered if somehow all the previously declared fonts failed to load.

### CSS basic font properties

Not counting the font shorthand, there are six basic font properties. The last two were introduced in Fonts Level 3. I'll quickly run through the first four. `font-weight` is for indicating the stroke thickness of your font, and can take values from `100` to `900` or keywords, like `bolder` or `lighter`.

`font-stretch` is used to select fonts based on their widths, ranging from condensed to expanded. `font-style` allows for the selection of italic or oblique faces. Italics are cursive, but obliques are sloped versions of a regular face. `font-size` indicates the desired height of the glyphs, and we can use absolute values like pixels and ems or relative values like percentages or viewport units, as well as keywords like `larger` or `smaller`.

`font-size-adjust` was put in to address legibility issues. Faces with low x-heights may sometimes be less legible, especially when they are triggered as fallback fonts. This property adjusts the font size of the fallback such that its x-height matches the first-choice font.

`font-synthesis` is also new, and was put in to address the issue of faux bolds and faux italics. You know, when the true italic or a heavier version of a font does not exist and the browser tries to pretend it does? It doesn't look good at all. So now you can set this property to a value of `none`, to tell the browser to quit it.

The @font-face rule allows us to use fonts beyond those available on a given platform by linking to those font files, which could be locally available or from an external source. Each rule specifies the characteristics of a single font within a family. These fonts will only be loaded when required. Multiple `@font-face` rules can be used to build an entire font family. And it consists of the `@font-face` keyword plus a bunch of font descriptors. Font descriptors and CSS properties are not the same thing. 

This is how an `@font-face` rule looks like. I don't think most people read through the CSS specification like they would a novel, so it's perfectly fine if this looks excessively complicated and undecipherable to you. I'll do my best to make this quick and simple (hopefully). Even though there's a whole lot of stuff in here, only the `font-family` descriptor and the `src` descriptor are mandatory. If either of them are absent, the entire rule is ignored. Now the `font-family` descriptor is simply a label that we reference in other CSS declarations. So even if you're using say, Frutiger, you could actually label it “dumplings” and it would still work.

The `src` descriptor is comma-separated list of external references or locally-installed font face names. It is made up of the declaration of the font file's location, and an optional format hint. If the browser doesn't support a particular font format stated in that hint, the font file won't be loaded. The next 3 descriptors, for style, weight and stretch, are used to match styles to a particular typeface in later declarations. Again, they are descriptors, so technically you could assign a black typeface to a font-weight of 100 and proceed to confuse your team members who cannot figure out why setting a weight of 100 gives them this massively bold typeface. Please don't do that.

`unicode-range` gives us the option to specify which code points or code blocks to be rendered with the typeface in a particular `@font-face` rule. We can make use of this to create composite fonts with glyphs from different typefaces. 

Remember when I said the goal of Unicode is to support every single character on the planet?  Every Unicode character is represented by a code point and all these code points are very well organised, into code blocks, 273 code blocks as of Unicode 9.0. Each code block is unique, in that there are no overlapping code points, and they have descriptive names like Basic Latin or CJK Unified Ideographs.

This descriptor lets us choose which characters we want displayed using a particular font face. I'm going to show you the example used in the specification to illustrate this concept. Say we've subsetted the font Droid Sans into Basic Latin, which is 190kb, and Japanese, which runs 1.2mb, with the full set as a fallback. If a run of text contains just Latin characters, the browser will only load the Basic Latin font file. Only if it encounters a character that doesn't exist in the subsetted fonts, perhaps an obscure symbol, it will check the unicode ranges for each `@font-face` rule. Because the Japanese subset does not contain the codepoint for the obscure symbol, the browser will not download the Japanese font at all. It will end up downloading the fallback instead.

### Font feature properties

Font feature properties were introduced with the CSS Fonts Module Level 3, so its about 6 years old now, give or take. Earlier, when I talked about all the different font formats, I mentioned that Apple and Microsoft worked to improve the original implementation of TrueType. OpenType and Apple Advanced Typography are what we term modern font technologies, and they can contain a lot more glyphs that previous font formats. 

So we will be able to include all kinds of typographic features like swashes, ligatures, small-caps, alternates and lots more, once browser support for these features becomes more widespread. And the original `font-variant` property that could only be used to trigger small-caps was expanded, a great deal.

Because there are so many properties available, each with lots of values, I'm just going to do a general overview. The best resource ever is The State of Web type, maintained by Bram Stein, which tells us the browser support status for all the font-related CSS properties. Some of you may be wondering what's the point of having all these typographic features? 

They are part and parcel of good typography, which is necessary to hold your reader's attention. The written word is a transference of speech, which is heard, into something visual, to be seen. Speakers whom we consider compelling will vary their cadence, use gestures, emphasise certain words. Typographic features like small caps, correct use of italics and punctuation do the same for text. Other features like old style numerals and ligatures help maintain typographic colour, to make reading more comfortable.

So these are the features you can turn on via CSS, but note that the font you are using must have these features to begin with. The features most often talked about at web typography talks are those up top, kerning, ligatures, small caps, old style numerals and stylistic alternates. Nobody talks about `font-variant-east-asian`, at least, I haven't met them yet. 

What this property does is, it allows for glyph substitution and positioning in East Asian text. For the benefit of the audience who can't read Han characters, it might seem like these languages share the same glyphs but actually, it depends. As I mentioned before, Han unification, which is assigning the same code point to different glyphs has been the subject of a lot of debate, so I'm just going to explain this here property.

Essentially, the same code point can have variant glyphs depending on the language being used. Like, simplified Chinese glyphs versus traditional Chinese glyphs. Japanese glyphs have their own specification known as JIS or Japanese Industrial Standard, and they too have alternate glyphs for the same character. This property allows us to toggle these variant glyphs.

Now the `font-language-override` property controls the rendering of language-specific glyphs in the typeface used. A commonly raised use case is the use of common ligatures, for the fi combination. The Turkish alphabet has both a dotted and dotless i, so the fi ligature shouldn't be used. Maybe a typeface doesn't recognise a lesser-known language like the Azeri language, which, similar to Turkish, has a dotless i, the `font-language-override` property can be used to force the usage of Turkish glyphs instead.

Lastly, it is not advisable to use the `font-feature-settings` property unless you really want to use a very specific OpenType property that was not covered in that whole lot. Last I checked, there were 141 OpenType feature tags to cover things like vertical kerning and vertical proportional alternate vertical metrics and so on. But if you want to use the more common features like ligatures or small-caps, use the respective `font-variant` properties instead.

### Implementing web fonts

If you're using building an English website, things are pretty straightforward. You can choose to serve your own font files, or use an online service. For online services, the most well-known free one is Google Fonts. Then we also have paid services like Adobe Typekit or Hoefler & Co's cloud.typography.

Broadly speaking, how Typekit works is that you create font kits, which are registered to specific domains, then add the fonts you want to use to those kits. Typekit then generates some Javascript that you need to embed on your site and apply the relevant CSS classes to get the fonts to show up. Typekit does offer a selection of free fonts as well, notably, the Source Han Sans and Source Han Serif families.

But if you want the smorgasbord of Chinese fonts, there are several font hosting services available as well. Justfont is the pioneer webfont hosting service out of Taipei, but they do more than just host fonts. They hold typography workshops and events, and also have a really great type design blog.

There is also 有字库, out of Shanghai, that offers various methods of implementing their fonts on your website. You can do it via CSS like how its done on Google Fonts, or load the font files via Javascript. They also offer SDK support for Java, PHP and NodeJS. The documentation is pretty good, but it's all in Chinese, so, just a heads up.

Type foundries have gotten into the game as well. 华康字型 or DynaComware are the guys who made PingFang, LiSong Pro and a number of other fonts that shipped with macOS. Their service is known as 华康威font. 文鼎科技 or Arphic Technology who made the AR PL fonts found on Ubuntu, have their own service called iFontCloud or 文鼎云字库.

But at the end of the day, we still need to keep in mind that CJK fonts weigh in on a megabyte scale. The font hosting services do offer optimisations like lazy loading and dynamic subsetting, so hopefully that helps. If you want to serve your own fonts, there are also tools available to help reduce the size of your font files.

If I'm building a site that uses English as its main language, I always turn to Font Squirrel to generate my webfonts, because subsetting. Font Squirrel's web font generator allows for a very granular level of customisation that I haven't found in other tools. There is a desktop application for Mac called FontPrep, which does subsetting quite well too.

Font Spider is an open-source command line tool that does smart webfont compression and conversion. It offers the ability to subset the fonts being used on the site. Look, I don't know why animals are the branding of choice for these tools, they just are. All these links in the slides will be shared out later if you're interested in all this.

And if you're really concerned about speed and page weight, you can simply choose not to use any webfonts at all, because honestly, I think that system fonts are getting much better. This, coming from someone who is running the latest macOS Sierra and the Fast Ring Insider version of Windows 10. But point being, the newer OSes are shipping with much prettier fonts than before. 

I personally use a hybrid technique, where the body text is set in a system font, but for the big titles and display text, where there is a limited number of characters I know will not change much over time, I generate webfonts containing only those glyphs, which makes the font file much much smaller than the full character set.

### Vertical layout on the web

This bit is going to cover relevant CSS properties for vertical typesetting. Late last year, I had a thought while riding home on my bicycle after work. I wondered how hard it would be to typeset Chinese text on the web like the novels and comic books I used to read when I was a kid. And that's how I discovered this marvellous CSS property called `writing-mode`.

There is an entire specification dedicated to writing modes and it's defined as such, support for international writing systems. So coverage includes right-to-left languages as well, but the `writing-mode` property specifically addresses vertical writing. You literally turn the browser on its side. Some people might be saying, big deal, we can do that with transforms too. Different!

I'm going to explain some basic terminology. First up, inline base direction. It is the direction that content is ordered on a line, and defines where the line starts and ends. Next, is block flow direction, which is the direction block-level boxes stack and the direction of this stacking within their container. The `writing-mode` property dictates the block flow direction. What you see here is the standard default horizontal-tb.

And this is when we apply `vertical-lr` and `vertical-rl` respectively. Every writing system has one or more native orientations. For example, Latin scripts and Arabic scripts are horizontal only, Mongolian is vertical only, and Han and Japanese Kana are bi-orientational. All glyphs are assigned a horizontal orientation by default, and the User Agent needs to transform text from this default when laying out text vertically.

There are two ways to do this, by rotation or by translation. Scripts that have native vertical orientations will have an intrinsic bi-orientational transform, so regardless of whether the text is horizontal or vertical, the glyphs transform and will always be upright. Latin-based characters, on the other hand, rotate. But glyphs can always be set sideways or upright with the `text-orientation` property.

This is what happens to your text when the different values of writing-mode are applied. These examples look correct because I'm using Firefox at the moment, but the last two examples, `sideways-rl` and `sideways-lr` have actually been deferred to CSS Writing Modes Level 4.

For text-orientation, the initial value is mixed, but you can make all the characters upright or sideways.

One more property is text-combine-upright. This addresses the issue of numerals and abbreviations in vertical text. A very common use case is dates, especially for Taiwan, where they use the 民國 calendar. This property lets us fit all the digits into the width of one character and display them upright. 

No browser supports the digits value yet, which allows us to dictate how many digits are acceptable to be squeezed in. The range allowed is between 2 to 4 characters. For now, with the `all` value, there is no limit, so you could technically put hippopotamus in there and it will look horribly squished.

The W3C has a very comprehensive document called the Requirements for Japanese Text Layout, created by the W3C Japanese Layout Task Force. It addresses the aspects of Japanese composition that differ from Western composition and is meant to serve as a reference for browser implementers so Japanese web layouts can be rendered correctly.

The W3C Chinese Layout Task Force is also working on a similar document for Chinese Text Layout, which addresses aspects of Chinese composition. This is still a work in progress. One of the key members of the task force, Bobby Tung published some guidelines for laying out Chinese content, which is an excellent reference.

Through my own personal experimentation, I sort of settled onto certain typographic conventions when I'm setting Chinese text.
1. Use the appropriate font family. For example, Source Han Serif has typefaces for simplified Chinese, traditional Chinese, Japanese and Korean. Pick the right one.
2. Chinese characters are denser than typical alphabets, just by virtue of strokes, so you may want to bump up the font size a little bit. Reading small characters on a screen is not a pleasant experience.
3. For line-height there is actually a magic number. Ideally, setting it between 1.5 to 2 works fine so 1.7 is a good choice. This gives the text enough breathing room and a more even typographic colour.
4. Every Chinese character takes up the same height and width, they are squares, even punctuation are full width characters. Using text-align: justify lines everything up neatly.
5. Keeping lines to between 25 and 35 characters is something I picked up from print books. A lot of text-heavy non-fiction books I find have lines with around 26 to 28 characters. So, just a suggestion there.
6. For print books, the start of a new paragraph is indicated by a two character indent, but for the web, it looks better to have spacing between paragraphs, so just set a margin-bottom to distinguish different paragraphs of text.

### Responsive layouts with modern CSS

Remember we established earlier that the web is a unique medium on its own? That's why we have this thing called responsive web design. A dynamic canvas. I don't know if any of you have ever watched interviews with Bruce Lee but that man is so charming and well-spoken. Anyhoo, this is one of my favourite quotes and it suits the web so well.

> Be formless, shapeless, like water. Now you put water into a cup, it becomes the cup. You put water into a bottle, it becomes the bottle. You put it in a teapot, it becomes the teapot. Now water can flow, or it can crash. Be water, my friend.

Rather than trying to wrangle every pixel into place, just embrace the fact that content is meant to flow. If you make it fixed, like freezing water into ice, it's not going to fit into all the different screens that people will use to view it. Embrace the dynamism, I say.

Look, I'm on Twitter quite a bit. I have seen the flame wars over frameworks, over how CSS sucks, over how CSS should be done with Javascript. People get very worked up about these things, it seems. I personally enjoy the cascade. The matter of fact is that frameworks are very popular. But they are kind of prescriptive, and that's how we end up with a lot of websites that utilise very similar layouts.

When we want to build a responsive website, one of the first things that people reach for in their CSS tool-kit is media queries. That wonderful conditional that allows us to create different layouts at different screen widths. And with Flexbox and now CSS Grid, we don't even need that many media queries any more.

CSS layout has become so much more mature since it first began. There had never been a specification that was created specially for layout until Flexbox and Grid came along. And that is fantastic. We have a lot of CSS properties at our disposal now. Around 496 the last time I checked. And it is up to us to combine and implement them creatively.



Features that are unique to the web medium, like responsive typography, use of viewport units, fluid layouts
Design to fit the context in which typography serves its purpose most effectively
both Latin type and Chinese type.
And talk about pages that have both Latin and Chinese text, like font pairing, layout, typesetting margins etc
